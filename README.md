# What this repository is about
In this repository, we recommend top 10 movies from given user data and for given genres (if applicable).
# Algorithm
For this milestone, here is what we did. We first got the movies based on genres (if given) as well as the users based on given user data. After grouping them, we used [IMDB ranking formula](https://www.fxsolver.com/browse/formulas/Bayes+estimator+-+Internet+Movie+Database+%28IMDB%29) to sort the movies which are rated by people with given user data. The formula is as follows
<svg height="37.6081pt" version="1.1" viewBox="338.099 21.549  260.278 38.6081" width="259.278pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs></defs>
<g id="page1" transform="matrix(1.99253 0 0 1.99253 0 0)">
<path d="M178.774 16.15C178.954 15.58 179.384 15.48 179.774 15.48V15.17C179.474 15.19 179.164 15.2 178.864 15.2C178.574 15.2 177.934 15.18 177.674 15.17V15.48C178.344 15.49 178.544 15.82 178.544 16.01C178.544 16.07 178.514 16.15 178.494 16.21L176.994 20.83L175.394 15.93C175.384 15.89 175.364 15.83 175.364 15.78C175.364 15.48 175.944 15.48 176.204 15.48V15.17C175.844 15.2 175.164 15.2 174.784 15.2S173.974 15.18 173.564 15.17V15.48C174.134 15.48 174.344 15.48 174.464 15.84L174.684 16.54L173.294 20.83L171.684 15.91C171.674 15.88 171.664 15.81 171.664 15.78C171.664 15.48 172.244 15.48 172.504 15.48V15.17C172.144 15.2 171.464 15.2 171.084 15.2S170.274 15.18 169.864 15.17V15.48C170.614 15.48 170.654 15.53 170.774 15.9L172.774 22.03C172.804 22.12 172.834 22.22 172.964 22.22C173.104 22.22 173.124 22.15 173.164 22.02L174.814 16.94L176.474 22.03C176.504 22.12 176.534 22.22 176.664 22.22C176.804 22.22 176.824 22.15 176.864 22.02L178.774 16.15Z"></path>
<path d="M182.201 18.47V15.88C182.201 15.65 182.201 15.53 182.421 15.5C182.521 15.48 182.811 15.48 183.011 15.48C183.911 15.48 185.031 15.52 185.031 16.97C185.031 17.66 184.791 18.47 183.311 18.47H182.201ZM184.311 18.6C185.281 18.36 186.061 17.75 186.061 16.97C186.061 16.01 184.921 15.17 183.451 15.17H180.311V15.48H180.551C181.321 15.48 181.341 15.59 181.341 15.95V21.22C181.341 21.58 181.321 21.69 180.551 21.69H180.311V22C180.671 21.97 181.381 21.97 181.771 21.97S182.871 21.97 183.231 22V21.69H182.991C182.221 21.69 182.201 21.58 182.201 21.22V18.69H183.351C183.511 18.69 183.931 18.69 184.281 19.03C184.661 19.39 184.661 19.7 184.661 20.37C184.661 21.02 184.661 21.42 185.071 21.8C185.481 22.16 186.031 22.22 186.331 22.22C187.111 22.22 187.281 21.4 187.281 21.12C187.281 21.06 187.281 20.95 187.151 20.95C187.041 20.95 187.041 21.04 187.031 21.11C186.971 21.82 186.621 22 186.371 22C185.881 22 185.801 21.49 185.661 20.56L185.531 19.76C185.351 19.12 184.861 18.79 184.311 18.6Z"></path>
<path d="M196.97 18.73C197.12 18.73 197.31 18.73 197.31 18.53S197.12 18.33 196.98 18.33H190.99C190.85 18.33 190.66 18.33 190.66 18.53S190.85 18.73 191 18.73H196.97ZM196.98 20.67C197.12 20.67 197.31 20.67 197.31 20.47S197.12 20.27 196.97 20.27H191C190.85 20.27 190.66 20.27 190.66 20.47S190.85 20.67 190.99 20.67H196.98Z"></path>
<path d="M217.037 11.5149C217.037 10.9749 216.777 10.8149 216.597 10.8149C216.347 10.8149 216.107 11.0749 216.107 11.2949C216.107 11.4249 216.157 11.4849 216.267 11.5949C216.477 11.7949 216.607 12.0549 216.607 12.4149C216.607 12.8349 215.997 15.1249 214.827 15.1249C214.317 15.1249 214.087 14.7749 214.087 14.2549C214.087 13.6949 214.357 12.9649 214.667 12.1349C214.737 11.9649 214.787 11.8249 214.787 11.6349C214.787 11.1849 214.467 10.8149 213.967 10.8149C213.027 10.8149 212.647 12.2649 212.647 12.3549C212.647 12.4549 212.747 12.4549 212.767 12.4549C212.867 12.4549 212.877 12.4349 212.927 12.2749C213.217 11.2649 213.647 11.0349 213.937 11.0349C214.017 11.0349 214.187 11.0349 214.187 11.3549C214.187 11.6049 214.087 11.8749 214.017 12.0549C213.577 13.2149 213.447 13.6749 213.447 14.1049C213.447 15.1849 214.327 15.3449 214.787 15.3449C216.467 15.3449 217.037 12.0349 217.037 11.5149Z"></path>
<rect height="0.399979" width="26.2083" x="201.856" y="19.3"></rect>
<path d="M206.536 25.1395C206.536 24.5995 206.276 24.4395 206.096 24.4395C205.846 24.4395 205.606 24.6995 205.606 24.9195C205.606 25.0495 205.656 25.1095 205.766 25.2195C205.976 25.4195 206.106 25.6795 206.106 26.0395C206.106 26.4595 205.496 28.7495 204.326 28.7495C203.816 28.7495 203.586 28.3995 203.586 27.8795C203.586 27.3195 203.856 26.5895 204.166 25.7595C204.236 25.5895 204.286 25.4495 204.286 25.2595C204.286 24.8095 203.966 24.4395 203.466 24.4395C202.526 24.4395 202.146 25.8895 202.146 25.9795C202.146 26.0795 202.246 26.0795 202.266 26.0795C202.366 26.0795 202.376 26.0595 202.426 25.8995C202.716 24.8895 203.146 24.6595 203.436 24.6595C203.516 24.6595 203.686 24.6595 203.686 24.9795C203.686 25.2295 203.586 25.4995 203.516 25.6795C203.076 26.8395 202.946 27.2995 202.946 27.7295C202.946 28.8095 203.826 28.9695 204.286 28.9695C205.966 28.9695 206.536 25.6595 206.536 25.1395Z"></path>
<path d="M213.374 26.5595H216.164C216.304 26.5595 216.494 26.5595 216.494 26.3595S216.304 26.1595 216.164 26.1595H213.374V23.3595C213.374 23.2195 213.374 23.0295 213.174 23.0295S212.974 23.2195 212.974 23.3595V26.1595H210.174C210.034 26.1595 209.844 26.1595 209.844 26.3595S210.034 26.5595 210.174 26.5595H212.974V29.3595C212.974 29.4995 212.974 29.6895 213.174 29.6895S213.374 29.4995 213.374 29.3595V26.5595Z"></path>
<path d="M220.164 28.2695C220.134 28.4195 220.074 28.6495 220.074 28.6995C220.074 28.8795 220.214 28.9695 220.364 28.9695C220.484 28.9695 220.664 28.8895 220.734 28.6895C220.744 28.6695 220.864 28.1995 220.924 27.9495L221.144 27.0495C221.204 26.8295 221.264 26.6095 221.314 26.3795C221.354 26.2095 221.434 25.9195 221.444 25.8795C221.594 25.5695 222.124 24.6595 223.074 24.6595C223.524 24.6595 223.614 25.0295 223.614 25.3595C223.614 25.6095 223.544 25.8895 223.464 26.1895L223.184 27.3495L222.984 28.1095C222.944 28.3095 222.854 28.6495 222.854 28.6995C222.854 28.8795 222.994 28.9695 223.144 28.9695C223.454 28.9695 223.514 28.7195 223.594 28.3995C223.734 27.8395 224.104 26.3795 224.194 25.9895C224.224 25.8595 224.754 24.6595 225.844 24.6595C226.274 24.6595 226.384 24.9995 226.384 25.3595C226.384 25.9295 225.964 27.0695 225.764 27.5995C225.674 27.8395 225.634 27.9495 225.634 28.1495C225.634 28.6195 225.984 28.9695 226.454 28.9695C227.394 28.9695 227.764 27.5095 227.764 27.4295C227.764 27.3295 227.674 27.3295 227.644 27.3295C227.544 27.3295 227.544 27.3595 227.494 27.5095C227.344 28.0395 227.024 28.7495 226.474 28.7495C226.304 28.7495 226.234 28.6495 226.234 28.4195C226.234 28.1695 226.324 27.9295 226.414 27.7095C226.604 27.1895 227.024 26.0795 227.024 25.5095C227.024 24.8595 226.624 24.4395 225.874 24.4395S224.614 24.8795 224.244 25.4095C224.234 25.2795 224.204 24.9395 223.924 24.6995C223.674 24.4895 223.354 24.4395 223.104 24.4395C222.204 24.4395 221.714 25.0795 221.544 25.3095C221.494 24.7395 221.074 24.4395 220.624 24.4395C220.164 24.4395 219.974 24.8295 219.884 25.0095C219.704 25.3595 219.574 25.9495 219.574 25.9795C219.574 26.0795 219.674 26.0795 219.694 26.0795C219.794 26.0795 219.804 26.0695 219.864 25.8495C220.034 25.1395 220.234 24.6595 220.594 24.6595C220.754 24.6595 220.904 24.7395 220.904 25.1195C220.904 25.3295 220.874 25.4395 220.744 25.9595L220.164 28.2695Z"></path>
<path d="M233.406 19.5C233.406 19.21 233.166 18.97 232.876 18.97S232.346 19.21 232.346 19.5S232.586 20.03 232.876 20.03S233.406 19.79 233.406 19.5Z"></path>
<path d="M240.236 15.86C240.296 15.62 240.326 15.52 240.516 15.49C240.606 15.48 240.926 15.48 241.126 15.48C241.836 15.48 242.946 15.48 242.946 16.47C242.946 16.81 242.786 17.5 242.396 17.89C242.136 18.15 241.606 18.47 240.706 18.47H239.586L240.236 15.86ZM241.676 18.6C242.686 18.38 243.876 17.68 243.876 16.67C243.876 15.81 242.976 15.17 241.666 15.17H238.816C238.616 15.17 238.526 15.17 238.526 15.37C238.526 15.48 238.616 15.48 238.806 15.48C238.826 15.48 239.016 15.48 239.186 15.5C239.366 15.52 239.456 15.53 239.456 15.66C239.456 15.7 239.446 15.73 239.416 15.85L238.076 21.22C237.976 21.61 237.956 21.69 237.166 21.69C236.986 21.69 236.896 21.69 236.896 21.89C236.896 22 237.016 22 237.036 22C237.316 22 238.016 21.97 238.296 21.97S239.286 22 239.566 22C239.646 22 239.766 22 239.766 21.8C239.766 21.69 239.676 21.69 239.486 21.69C239.116 21.69 238.836 21.69 238.836 21.51C238.836 21.45 238.856 21.4 238.866 21.34L239.526 18.69H240.716C241.626 18.69 241.806 19.25 241.806 19.6C241.806 19.75 241.726 20.06 241.666 20.29C241.596 20.57 241.506 20.94 241.506 21.14C241.506 22.22 242.706 22.22 242.836 22.22C243.686 22.22 244.036 21.21 244.036 21.07C244.036 20.95 243.926 20.95 243.916 20.95C243.826 20.95 243.806 21.02 243.786 21.09C243.536 21.83 243.106 22 242.876 22C242.546 22 242.476 21.78 242.476 21.39C242.476 21.08 242.536 20.57 242.576 20.25C242.596 20.11 242.616 19.92 242.616 19.78C242.616 19.01 241.946 18.7 241.676 18.6Z"></path>
<path d="M250.468 19.7H253.258C253.398 19.7 253.588 19.7 253.588 19.5S253.398 19.3 253.258 19.3H250.468V16.5C250.468 16.36 250.468 16.17 250.268 16.17S250.068 16.36 250.068 16.5V19.3H247.268C247.128 19.3 246.938 19.3 246.938 19.5S247.128 19.7 247.268 19.7H250.068V22.5C250.068 22.64 250.068 22.83 250.268 22.83S250.468 22.64 250.468 22.5V19.7Z"></path>
<path d="M267.173 14.6449C267.143 14.7949 267.083 15.0249 267.083 15.0749C267.083 15.2549 267.223 15.3449 267.373 15.3449C267.493 15.3449 267.673 15.2649 267.743 15.0649C267.753 15.0449 267.873 14.5749 267.933 14.3249L268.153 13.4249C268.213 13.2049 268.273 12.9849 268.323 12.7549C268.363 12.5849 268.443 12.2949 268.453 12.2549C268.603 11.9449 269.133 11.0349 270.083 11.0349C270.533 11.0349 270.623 11.4049 270.623 11.7349C270.623 11.9849 270.553 12.2649 270.473 12.5649L270.193 13.7249L269.993 14.4849C269.953 14.6849 269.863 15.0249 269.863 15.0749C269.863 15.2549 270.003 15.3449 270.153 15.3449C270.463 15.3449 270.523 15.0949 270.603 14.7749C270.743 14.2149 271.113 12.7549 271.203 12.3649C271.233 12.2349 271.763 11.0349 272.853 11.0349C273.283 11.0349 273.393 11.3749 273.393 11.7349C273.393 12.3049 272.973 13.4449 272.773 13.9749C272.683 14.2149 272.643 14.3249 272.643 14.5249C272.643 14.9949 272.993 15.3449 273.463 15.3449C274.403 15.3449 274.773 13.8849 274.773 13.8049C274.773 13.7049 274.683 13.7049 274.653 13.7049C274.553 13.7049 274.553 13.7349 274.503 13.8849C274.353 14.4149 274.033 15.1249 273.483 15.1249C273.313 15.1249 273.243 15.0249 273.243 14.7949C273.243 14.5449 273.333 14.3049 273.423 14.0849C273.613 13.5649 274.033 12.4549 274.033 11.8849C274.033 11.2349 273.633 10.8149 272.883 10.8149S271.623 11.2549 271.253 11.7849C271.243 11.6549 271.213 11.3149 270.933 11.0749C270.683 10.8649 270.363 10.8149 270.113 10.8149C269.213 10.8149 268.723 11.4549 268.553 11.6849C268.503 11.1149 268.083 10.8149 267.633 10.8149C267.173 10.8149 266.983 11.2049 266.893 11.3849C266.713 11.7349 266.583 12.3249 266.583 12.3549C266.583 12.4549 266.683 12.4549 266.703 12.4549C266.803 12.4549 266.813 12.4449 266.873 12.2249C267.043 11.5149 267.243 11.0349 267.603 11.0349C267.763 11.0349 267.913 11.1149 267.913 11.4949C267.913 11.7049 267.883 11.8149 267.753 12.3349L267.173 14.6449Z"></path>
<rect height="0.399979" width="26.2083" x="257.578" y="19.3"></rect>
<path d="M262.258 25.1395C262.258 24.5995 261.998 24.4395 261.818 24.4395C261.568 24.4395 261.328 24.6995 261.328 24.9195C261.328 25.0495 261.378 25.1095 261.488 25.2195C261.698 25.4195 261.828 25.6795 261.828 26.0395C261.828 26.4595 261.218 28.7495 260.048 28.7495C259.538 28.7495 259.308 28.3995 259.308 27.8795C259.308 27.3195 259.578 26.5895 259.888 25.7595C259.958 25.5895 260.008 25.4495 260.008 25.2595C260.008 24.8095 259.688 24.4395 259.188 24.4395C258.248 24.4395 257.868 25.8895 257.868 25.9795C257.868 26.0795 257.968 26.0795 257.988 26.0795C258.088 26.0795 258.098 26.0595 258.148 25.8995C258.438 24.8895 258.868 24.6595 259.158 24.6595C259.238 24.6595 259.408 24.6595 259.408 24.9795C259.408 25.2295 259.308 25.4995 259.238 25.6795C258.798 26.8395 258.668 27.2995 258.668 27.7295C258.668 28.8095 259.548 28.9695 260.008 28.9695C261.688 28.9695 262.258 25.6595 262.258 25.1395Z"></path>
<path d="M269.097 26.5595H271.887C272.027 26.5595 272.217 26.5595 272.217 26.3595S272.027 26.1595 271.887 26.1595H269.097V23.3595C269.097 23.2195 269.097 23.0295 268.897 23.0295S268.697 23.2195 268.697 23.3595V26.1595H265.897C265.757 26.1595 265.567 26.1595 265.567 26.3595S265.757 26.5595 265.897 26.5595H268.697V29.3595C268.697 29.4995 268.697 29.6895 268.897 29.6895S269.097 29.4995 269.097 29.3595V26.5595Z"></path>
<path d="M275.887 28.2695C275.857 28.4195 275.797 28.6495 275.797 28.6995C275.797 28.8795 275.937 28.9695 276.087 28.9695C276.207 28.9695 276.387 28.8895 276.457 28.6895C276.467 28.6695 276.587 28.1995 276.647 27.9495L276.867 27.0495C276.927 26.8295 276.987 26.6095 277.037 26.3795C277.077 26.2095 277.157 25.9195 277.167 25.8795C277.317 25.5695 277.847 24.6595 278.797 24.6595C279.247 24.6595 279.337 25.0295 279.337 25.3595C279.337 25.6095 279.267 25.8895 279.187 26.1895L278.907 27.3495L278.707 28.1095C278.667 28.3095 278.577 28.6495 278.577 28.6995C278.577 28.8795 278.717 28.9695 278.867 28.9695C279.177 28.9695 279.237 28.7195 279.317 28.3995C279.457 27.8395 279.827 26.3795 279.917 25.9895C279.947 25.8595 280.477 24.6595 281.567 24.6595C281.997 24.6595 282.107 24.9995 282.107 25.3595C282.107 25.9295 281.687 27.0695 281.487 27.5995C281.397 27.8395 281.357 27.9495 281.357 28.1495C281.357 28.6195 281.707 28.9695 282.177 28.9695C283.117 28.9695 283.487 27.5095 283.487 27.4295C283.487 27.3295 283.397 27.3295 283.367 27.3295C283.267 27.3295 283.267 27.3595 283.217 27.5095C283.067 28.0395 282.747 28.7495 282.197 28.7495C282.027 28.7495 281.957 28.6495 281.957 28.4195C281.957 28.1695 282.047 27.9295 282.137 27.7095C282.327 27.1895 282.747 26.0795 282.747 25.5095C282.747 24.8595 282.347 24.4395 281.597 24.4395S280.337 24.8795 279.967 25.4095C279.957 25.2795 279.927 24.9395 279.647 24.6995C279.397 24.4895 279.077 24.4395 278.827 24.4395C277.927 24.4395 277.437 25.0795 277.267 25.3095C277.217 24.7395 276.797 24.4395 276.347 24.4395C275.887 24.4395 275.697 24.8295 275.607 25.0095C275.427 25.3595 275.297 25.9495 275.297 25.9795C275.297 26.0795 275.397 26.0795 275.417 26.0795C275.517 26.0795 275.527 26.0695 275.587 25.8495C275.757 25.1395 275.957 24.6595 276.317 24.6595C276.477 24.6595 276.627 24.7395 276.627 25.1195C276.627 25.3295 276.597 25.4395 276.467 25.9595L275.887 28.2695Z"></path>
<path d="M289.129 19.5C289.129 19.21 288.889 18.97 288.599 18.97S288.069 19.21 288.069 19.5S288.309 20.03 288.599 20.03S289.129 19.79 289.129 19.5Z"></path>
<path d="M299.809 15.05C299.809 15.02 299.789 14.95 299.699 14.95C299.669 14.95 299.659 14.96 299.549 15.07L298.849 15.84C298.759 15.7 298.299 14.95 297.189 14.95C294.959 14.95 292.709 17.16 292.709 19.48C292.709 21.13 293.889 22.22 295.419 22.22C296.289 22.22 297.049 21.82 297.579 21.36C298.509 20.54 298.679 19.63 298.679 19.6C298.679 19.5 298.579 19.5 298.559 19.5C298.499 19.5 298.449 19.52 298.429 19.6C298.339 19.89 298.109 20.6 297.419 21.18C296.729 21.74 296.099 21.91 295.579 21.91C294.679 21.91 293.619 21.39 293.619 19.83C293.619 19.26 293.829 17.64 294.829 16.47C295.439 15.76 296.379 15.26 297.269 15.26C298.289 15.26 298.879 16.03 298.879 17.19C298.879 17.59 298.849 17.6 298.849 17.7S298.959 17.8 298.999 17.8C299.129 17.8 299.129 17.78 299.179 17.6L299.809 15.05Z"></path>
</g>
</svg>
Where ```v``` is the number of votes for the movie, ```m``` is minimum votes required to be listed in the Top 10, ```R``` is the average for the movie as a decimal number from 0 to 5 and ```C``` is the average rating of all movies grouped by genre and user data. The minimum number of votes for the movie is chosen to be 10. If we are unable to find people with given user data, we go one level down to ignore one of the inputs. We have following levels. Smaller number means higher priority.
1. Gender, Age, Occupation
2. Gender, Age, <del>Occupation</del>
3. <del>Gender</del>, Age, Occupation
4. Gender, <del>Age</del>, Occupation
5. <del>Gender</del>, Age, <del>Occupation</del>
6. <del>Gender</del>, <del>Age</del>, Occupation
7. Gender, <del>Age</del>, <del>Occupation</del>
8. <del>Gender</del>, <del>Age</del>, <del>Occupation</del>
# Instruction for those who do not use docker
### Requirement
Java 1.11 (Please set ```JAVA_HOME``` before running the code)
\
Maven
### Check out the source code
```bash
$ git clone https://github.com/elkhan199/group9.git [destinationPath]
$ cd [destinationPath]
```
### Build
```bash
$ mvn install
```
# Instruction for docker users
### Building the image and accessing to the container
```Dockerfile``` and the script to access the container is located in ```scripts``` folder
```bash
$ cd scripts/ && sh docker_run.sh [image_name]
```
### Build and run
Once you are in the container, please run ```run.sh``` script as follows
```bash
$ . run.sh
```
It will print output for the example arguments.
# Usage
Our tool takes can take either 3 or 4 arguments as follows
```bash
$ java -cp target/group9-1.0-SNAPSHOT.jar Main [gender] [age] [occupation]
```
```bash
$ java -cp target/group9-1.0-SNAPSHOT.jar Main [gender] [age] [occupation] [genre]
```
It is allowed to leave gender, age, and occupation as empty but if you opt for 4 arguments, then the genre input must not be empty. 
If you want to give more than one genre, then separate them with "|" delimeter. 
```
$ java -cp target/group9-1.0-SNAPSHOT.jar Main [gender] [age] [occupation] ["genre_1|genre_2"]
```
e.g.:
```bash
$ java -cp target/group9-1.0-SNAPSHOT.jar Main "F" "25" "gradstudent" "action|comedy"
```
These are the all available occupations we currently have
| Occupation list      |
|----------------------|
| academic/educator    |
| artist               |
| clerical/admin       |
| college/gradstudent  |
| customerservice      |
| doctor/healthcare    |
| executive/managerial |
| farmer               |
| homemaker            |
| K-12student          |
| lawyer               |
| programmer           |
| retired              |
| sales/marketing      |
| scientist            |
| self-employed        |
| technician/engineer  |
| tradesman/craftsman  |
| unemployed           |
| writer               |
| other                |

# Troubleshooting

Input requirements:
1) The number of arguments passed must be exactly 3 or 4. Otherwise, a warning message is outputed and program is terminated.
2) Gender, genre and occupation strings are not case sensitive.
3) Genres must be split by '|' character, otherwise a warning message is outputed and program is terminated.
4) User must include each possible genre maximum once, otherwise a warning message is outputed and program is terminated.
5) If occupation string is not one of specified user occupations (not an educator, student or else) or not equal to "other", then we print the warning message and terminate the program. 
6) All inputs may be left empty except of the genre input. It must contain at least one valid genre and will terminate program with warning message othersise.
Output:
1) If every input requirement is satisfied, then the program will output ten movies with their corresponding [IMDB](https://www.imdb.com/) links.



# Contribution
- Kasymzhan Abdyldayev (20182002) - Error handling
- Elkhan Ismayilzada (20182010) - Algorithm implementation, Testing, Readme
- Aibar Oshakbayev (20182021) - Testing, Readme
